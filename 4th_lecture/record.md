Visitor 패턴

굉장히 어려운데, 그 이유는 일반적으로 알고리즘을 짤 때
반복되는 부분과 반복되지 않는 부분을 잘 구분하지 못해서

loop를 구현할 떄,
반복 부분과 반복되지 않는 부분을 구분하기 어렵다.

간단한 loop의 경우에는 loop api(map, filter, forEach)를 사용하면 되지만
복잡한 loop의 경우에는 어떨까?

json 객체 내에 있는 모든 key를 순회하면서 하고 싶은 일이 있어
그 안에 string을 만나면 string에다가 \*를 붙여주고 싶다.
이런 것도 코드와 함수를 분리해서 명확하게 처리할 수 있을까?

컴포지트 패턴

복잡한 recursive 구조를 일관된 이름으로 loop를 돌고
하위 계층에서도 동일한 이름의 함수를 호출하면서 재귀적으로 위임
각자 해결하도록 넘긴다.
하지만 컴포지트 패턴은 사실
loop를 도는 구조와 loop에서 처리할 일이 함께 짬뽕이 되어 있다.

그래서 컴포지트 패턴을 쓴다 하더라도
이전에 string에 \*를 붙여주었던 것을 -로 바꾸는 것 만으로도 컴포지트 패턴을 다시 짜야한다.
해야될 일과 loop 구조가 분리되어 있지 않기 떄문이다.

loop 구조가 동일하더라도 기능이 하드코딩 되어 있어서 그렇다.
기능 부분만 분리해서 loop 구조와 분리할 수 있는가?

for 문이든 컴포지트 패턴이든 loop가 하는 일과 loop 구조를 분리하고 싶은 것
그래야지 loop를 재활용하면서 내부에서 하는 일만 교체할 수 있다.

중복된 것을 제거하기 위해 공통된 것을 묶는다 => 추상화
디자인 패턴의 기본적인 철학은 상속 구조가 아니라 소유 구조이다.
그러나 접근하기 쉽게 상속 구조를 먼저 만들어 보자
